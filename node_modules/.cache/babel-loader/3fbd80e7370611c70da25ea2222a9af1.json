{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KarlP\\\\new-app\\\\client\\\\src\\\\components\\\\main\\\\App.js\",\n    _s = $RefreshSig$();\n\n//Written by Karl Pollock, 2022.\n//KarlPollock91@gmail.com\n//www.karlpollock.com\n//App.js is the top level component which ensures the user is logged in correctly before displaying child components.\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Route, Routes } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\nimport * as Constants from '../../utils/constants';\nimport LeftSidebar from './LeftSidebar';\nimport Main from './Main';\nimport RightSidebar from './RightSidebar';\nimport Loading from '../secondary/Loading';\nimport Login from './Login';\nimport ServerCreation from './ServerCreation';\nimport PostCreation from './PostCreation';\nimport ViewPost from './ViewPost';\nimport ViewProfile from './ViewProfile';\nimport ViewServer from './ViewServer';\nimport SplashPage from './SplashPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App(props) {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [userInfo, setUserInfo] = useState();\n  const navigate = useNavigate(); //Component hook that checks if user is logged.\n\n  useEffect(() => {\n    document.title = \"picpark\";\n\n    if (!localStorage.getItem(\"authToken\")) {\n      setLoading(false);\n      navigate('/login');\n    } else {\n      verifyAuth();\n    }\n  }, []); //Send the users current auth token to the server to validate.\n\n  const verifyAuth = () => {\n    axios.get(`${Constants.SERVER_URL}/accounts/verifyAuth`, {\n      headers: {\n        \"x-access-token\": localStorage.getItem(\"authToken\") // \"Access-Control-Allow-Origin\": \"*\"\n\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setUserInfo(res.data);\n      } else {\n        navigate('/login');\n      }\n    }).catch(err => {\n      localStorage.clear();\n      navigate('/login');\n    });\n  }; //Log out and return to login screen.\n\n\n  const logout = () => {\n    localStorage.clear();\n    navigate('/login');\n  };\n\n  const [newServer, setNewServer] = useState(false);\n  const [newUser, setNewUser] = useState(false); //Refresh the items in the left sidebar.\n\n  const refreshLeftSidebar = () => {\n    setNewServer(!newServer);\n  }; //Refresh the items in the right sidebar.\n\n\n  const refreshRightSidebar = () => {\n    setNewUser(!newUser);\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper w-100 h-100 mw-100 mh-100\",\n      children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 vh-100 container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col vh-100 border border-secondary full-height\",\n          children: /*#__PURE__*/_jsxDEV(LeftSidebar, {\n            newServer: newServer,\n            userId: userInfo._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-auto col-8 vh-100 border border-secondary full-height\",\n          children: /*#__PURE__*/_jsxDEV(Routes, {\n            children: [/*#__PURE__*/_jsxDEV(Route, {\n              path: \"\",\n              element: /*#__PURE__*/_jsxDEV(SplashPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 53\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/login\",\n              element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 59\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/s/:serverId\",\n              element: /*#__PURE__*/_jsxDEV(Main, {\n                refreshLeftSidebar: refreshLeftSidebar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 65\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/createServer\",\n              element: /*#__PURE__*/_jsxDEV(ServerCreation, {\n                refreshLeftSidebar: refreshLeftSidebar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 67\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/post/:serverId\",\n              element: /*#__PURE__*/_jsxDEV(PostCreation, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 68\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/v/:serverId/:postId\",\n              element: /*#__PURE__*/_jsxDEV(ViewPost, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 73\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/profile/:userId\",\n              element: /*#__PURE__*/_jsxDEV(ViewProfile, {\n                refreshRightSidebar: refreshRightSidebar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 69\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/serverInfo/:serverId\",\n              element: /*#__PURE__*/_jsxDEV(ViewServer, {\n                refreshLeftSidebar: refreshLeftSidebar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 74\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col vh-100 border border-secondary\",\n          children: /*#__PURE__*/_jsxDEV(RightSidebar, {\n            newUser: newUser,\n            userInfo: userInfo,\n            logoutCallback: logout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(App, \"VlRrq9C9AU5sIRPnbLKa7ph3+1M=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/KarlP/new-app/client/src/components/main/App.js"],"names":["React","useState","useEffect","axios","Route","Routes","useNavigate","Constants","LeftSidebar","Main","RightSidebar","Loading","Login","ServerCreation","PostCreation","ViewPost","ViewProfile","ViewServer","SplashPage","App","props","loading","setLoading","userInfo","setUserInfo","navigate","document","title","localStorage","getItem","verifyAuth","get","SERVER_URL","headers","then","res","status","data","catch","err","clear","logout","newServer","setNewServer","newUser","setNewUser","refreshLeftSidebar","refreshRightSidebar","_id"],"mappings":"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","sourcesContent":["//Written by Karl Pollock, 2022.\r\n//KarlPollock91@gmail.com\r\n//www.karlpollock.com\r\n\r\n//App.js is the top level component which ensures the user is logged in correctly before displaying child components.\r\n\r\nimport React, {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\nimport {Route, Routes} from 'react-router-dom';\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\nimport * as Constants from '../../utils/constants';\r\n\r\nimport LeftSidebar from './LeftSidebar';\r\nimport Main from './Main';\r\nimport RightSidebar from './RightSidebar';\r\nimport Loading from '../secondary/Loading';\r\nimport Login from './Login';\r\nimport ServerCreation from './ServerCreation';\r\nimport PostCreation from './PostCreation';\r\nimport ViewPost from './ViewPost';\r\nimport ViewProfile from './ViewProfile';\r\nimport ViewServer from './ViewServer';\r\nimport SplashPage from './SplashPage';\r\n\r\n\r\nfunction App(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [userInfo, setUserInfo] = useState();\r\n\r\n    const navigate = useNavigate();\r\n\r\n    //Component hook that checks if user is logged.\r\n    useEffect(() => {\r\n        document.title = \"picpark\"\r\n        if (!localStorage.getItem(\"authToken\")){\r\n            setLoading(false);\r\n            navigate('/login');\r\n        } else {\r\n            verifyAuth();\r\n        }\r\n    }, [])\r\n\r\n    //Send the users current auth token to the server to validate.\r\n    const verifyAuth = () => {\r\n        axios.get(`${Constants.SERVER_URL}/accounts/verifyAuth`, {\r\n            headers: {\r\n                \"x-access-token\": localStorage.getItem(\"authToken\")\r\n                // \"Access-Control-Allow-Origin\": \"*\"\r\n            }\r\n            }).then((res) => {\r\n                if (res.status === 200) {\r\n                    setUserInfo(res.data)\r\n                } else {\r\n                    navigate('/login');\r\n                }\r\n            }).catch((err) => {\r\n                localStorage.clear();\r\n                navigate('/login');\r\n            });\r\n    }\r\n\r\n    //Log out and return to login screen.\r\n    const logout = () => {\r\n        localStorage.clear();\r\n        navigate('/login');\r\n    }\r\n\r\n\r\n    const [newServer, setNewServer] = useState(false);\r\n    const [newUser, setNewUser] = useState(false);\r\n\r\n    //Refresh the items in the left sidebar.\r\n    const refreshLeftSidebar = () => {\r\n        setNewServer(!newServer);\r\n    }\r\n    //Refresh the items in the right sidebar.\r\n    const refreshRightSidebar = () => {\r\n        setNewUser(!newUser);\r\n    }\r\n\r\n    if (loading) {\r\n        return(\r\n            <div className=\"wrapper w-100 h-100 mw-100 mh-100\">\r\n                <Loading/>\r\n            </div>\r\n        )\r\n    } else {\r\n        return(\r\n            <div className=\"w-100 vh-100 container-fluid\">\r\n                <div className=\"row\">\r\n                    <div  className=\"col vh-100 border border-secondary full-height\">\r\n                        <LeftSidebar newServer={newServer} userId={userInfo._id}/>\r\n                    </div>\r\n                    <div className=\"overflow-auto col-8 vh-100 border border-secondary full-height\">\r\n                    \r\n                        <Routes>\r\n                            <Route path=\"\" element={<SplashPage/>}/>\r\n                            <Route path=\"/login\" element={<Login/>}/>\r\n                            <Route path=\"/s/:serverId\" element={<Main refreshLeftSidebar={refreshLeftSidebar}/>} />\r\n                            <Route path=\"/createServer\" element={ <ServerCreation refreshLeftSidebar={refreshLeftSidebar}/>}/>\r\n                            <Route path=\"/post/:serverId\" element={<PostCreation/>}/>\r\n                            <Route path=\"/v/:serverId/:postId\" element={<ViewPost />}/>\r\n                            <Route path=\"/profile/:userId\" element={<ViewProfile refreshRightSidebar={refreshRightSidebar}/>}/>\r\n                            <Route path=\"/serverInfo/:serverId\" element={<ViewServer refreshLeftSidebar={refreshLeftSidebar}/>}/>\r\n                        </Routes>\r\n\r\n                    </div>\r\n                    <div  className=\"col vh-100 border border-secondary\">\r\n                        <RightSidebar newUser={newUser} userInfo={userInfo} logoutCallback={logout}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n    }\r\n    \r\n} \r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}