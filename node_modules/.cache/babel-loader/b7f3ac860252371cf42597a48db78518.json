{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KarlP\\\\new-app\\\\client\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport LeftSidebar from './LeftSidebar';\nimport Main from './Main';\nimport RightSidebar from './RightSidebar';\nimport Loading from './Loading';\nimport Login from './Login';\nimport ServerCreation from './ServerCreation';\nimport './css/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App(props) {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [currentServerId, setCurrentServerId] = useState(null); //0 - main\n  //1 - create server\n\n  const [componentDisplay, setComponentDisplay] = useState(0); //TODO figure out why verifyAuth is triggering twice\n\n  const verifyAuth = () => {\n    axios.get('http://localhost:5000/account/verifyAuth', {\n      headers: {\n        \"x-access-token\": localStorage.getItem(\"authToken\") // \"Access-Control-Allow-Origin\": \"*\"\n\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setCurrentServerId(res.data.mostRecentServer);\n        setLoggedIn(true);\n      }\n    }).catch(err => {//console.log(err.response);\n    });\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"authToken\");\n    setLoading(true);\n    setLoggedIn(false);\n  };\n\n  useEffect(() => {\n    if (!localStorage.getItem(\"authToken\")) {\n      setLoading(false);\n      setLoggedIn(false);\n    } else {\n      verifyAuth();\n    }\n  });\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper w-100 h-100 mw-100 mh-100\",\n      children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  } else if (loggedIn) {\n    var component = /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"An error has occured\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }, this);\n\n    if (componentDisplay === 0) {\n      component = /*#__PURE__*/_jsxDEV(Main, {\n        className: \"main\",\n        serverId: currentServerId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }, this);\n    } else if (componentDisplay === 1) {\n      component = /*#__PURE__*/_jsxDEV(ServerCreation, {\n        setComponentDisplay: setComponentDisplay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 25\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper w-100 h-100\",\n      children: [/*#__PURE__*/_jsxDEV(LeftSidebar, {\n        className: \"leftsidebar\",\n        setComponentDisplay: setComponentDisplay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"center\",\n        children: component\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(RightSidebar, {\n        className: \"rightsidebar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        class: \"btn btn-outline-primary\",\n        onClick: logout,\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper w-100 h-100\",\n      children: /*#__PURE__*/_jsxDEV(Login, {\n        verifyAuth: verifyAuth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(App, \"9jWqY2qKveTLbtgOB0TA6BLSbhI=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/KarlP/new-app/client/src/components/App.js"],"names":["React","useState","useEffect","axios","LeftSidebar","Main","RightSidebar","Loading","Login","ServerCreation","App","props","loading","setLoading","loggedIn","setLoggedIn","currentServerId","setCurrentServerId","componentDisplay","setComponentDisplay","verifyAuth","get","headers","localStorage","getItem","then","res","status","data","mostRecentServer","catch","err","logout","removeItem","component"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport LeftSidebar from './LeftSidebar';\r\nimport Main from './Main';\r\nimport RightSidebar from './RightSidebar';\r\nimport Loading from './Loading';\r\nimport Login from './Login';\r\nimport ServerCreation from './ServerCreation';\r\nimport './css/App.css'\r\n\r\n\r\nfunction App(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [loggedIn, setLoggedIn] = useState(false);\r\n    const [currentServerId, setCurrentServerId] = useState(null);\r\n\r\n    //0 - main\r\n    //1 - create server\r\n    const [componentDisplay, setComponentDisplay] = useState(0);\r\n\r\n    //TODO figure out why verifyAuth is triggering twice\r\n\r\n    const verifyAuth = () => {\r\n        axios.get('http://localhost:5000/account/verifyAuth', {\r\n            headers: {\r\n                \"x-access-token\": localStorage.getItem(\"authToken\")\r\n                // \"Access-Control-Allow-Origin\": \"*\"\r\n            }\r\n            }).then((res) => {\r\n                if (res.status === 200) {\r\n                    setCurrentServerId(res.data.mostRecentServer);\r\n                    setLoggedIn(true);\r\n\r\n                }\r\n            }).catch((err) => {\r\n                //console.log(err.response);\r\n            });\r\n    }\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem(\"authToken\");\r\n        setLoading(true);\r\n        setLoggedIn(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!localStorage.getItem(\"authToken\")){\r\n            setLoading(false);\r\n            setLoggedIn(false);\r\n        } else {\r\n            verifyAuth();\r\n        }\r\n    })\r\n\r\n\r\n\r\n    if (loading) {\r\n        return(\r\n            <div className=\"wrapper w-100 h-100 mw-100 mh-100\">\r\n                <Loading/>\r\n            </div>\r\n        )\r\n    } else if (loggedIn) {\r\n\r\n        var component = <div>An error has occured</div>;\r\n\r\n        if (componentDisplay === 0) {\r\n            component = <Main className=\"main\" serverId={currentServerId}/>\r\n        } else if (componentDisplay === 1) {\r\n            component = <ServerCreation setComponentDisplay={setComponentDisplay}/>\r\n        }\r\n\r\n        return(\r\n            <div className=\"wrapper w-100 h-100\">\r\n                <LeftSidebar className=\"leftsidebar\" setComponentDisplay={setComponentDisplay}/>\r\n                <div className=\"center\">\r\n                    {component}\r\n                </div>\r\n                <RightSidebar className=\"rightsidebar\"/>\r\n                <button type=\"button\" class=\"btn btn-outline-primary\" onClick={logout}>Log Out</button>\r\n            </div>\r\n        )\r\n\r\n    } else {\r\n        return(\r\n            <div className=\"wrapper w-100 h-100\">\r\n                <Login verifyAuth={verifyAuth}/>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n} \r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}