{"ast":null,"code":"import _slicedToArray from\"C:/Users/KarlP/new-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//Written by Karl Pollock, 2022.\n//KarlPollock91@gmail.com\n//www.karlpollock.com\n//ServerCreation.js holds the component for creating a new server.\nimport React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{Form}from'react-bootstrap';import*as Constants from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ServerCreation(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),nameInput=_useState2[0],setNameInput=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorText=_useState4[0],setErrorText=_useState4[1];var _useState5=useState(/*#__PURE__*/React.createRef()),_useState6=_slicedToArray(_useState5,1),formRef=_useState6[0];var navigate=useNavigate();//Sends input forms to server to generate a user server.\nvar handleCreation=function handleCreation(){var fd=new FormData();fd.append(\"serverName\",nameInput);if(formRef.current.files[0]&&formRef.current.files[0].name){fd.append('file-upload',formRef.current.files[0],formRef.current.files[0].name);}if(!formRef.current.files[0]||formRef.current.files[0].type.split('/')[0]===\"image\"){axios.post(\"\".concat(Constants.SERVER_URL,\"/servers/create\"),fd,{headers:{'x-access-token':localStorage.getItem(\"authToken\"),'Content-Type':'multipart/form-data'}}).then(function(res){if(res.status===200){setErrorText(\"Server created\");finishServerCreation(res.data.serverId);}}).catch(function(err){setErrorText(\"Something went wrong.\");});}else{setErrorText(\"Only image files can be set as the server thumbnail.\");};};//Sends the user back a page.\nvar cancelServerCreation=function cancelServerCreation(){navigate(-1);};//Sends the user to the Main.js component for server with id serverId\nvar finishServerCreation=function finishServerCreation(serverId){props.refreshLeftSidebar();navigate(\"/s/\".concat(serverId));};return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center position-relative w-100 h-100\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-circle position-absolute top-0 end-0 fa-lg\",onClick:cancelServerCreation}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto w-75 mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{children:errorText}),\"Server Name\",/*#__PURE__*/_jsx(\"div\",{className:\"input-group mb-3 \",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",maxLength:20,value:nameInput,onInput:function onInput(e){return setNameInput(e.target.value);},className:\"form-control\",placeholder:\"Server Name\",\"aria-label\":\"servername\",\"aria-describedby\":\"basic-addon1\"})}),\"Server Thumbnail\",/*#__PURE__*/_jsx(Form,{action:\"/file\",method:\"post\",encType:\"multipart/form-data\",children:/*#__PURE__*/_jsx(Form.Group,{controlId:\"formFile\",className:\"mb-3\",a:true,children:/*#__PURE__*/_jsx(Form.Control,{type:\"file\",name:\"file-upload\",ref:formRef})})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCreation,className:\"btn btn-outline-primary\",children:\"Create\"})]})]});}export default ServerCreation;","map":{"version":3,"sources":["C:/Users/KarlP/new-app/client/src/components/main/ServerCreation.js"],"names":["React","useState","axios","useNavigate","Form","Constants","ServerCreation","props","nameInput","setNameInput","errorText","setErrorText","createRef","formRef","navigate","handleCreation","fd","FormData","append","current","files","name","type","split","post","SERVER_URL","headers","localStorage","getItem","then","res","status","finishServerCreation","data","serverId","catch","err","cancelServerCreation","refreshLeftSidebar","e","target","value"],"mappings":"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","sourcesContent":["//Written by Karl Pollock, 2022.\r\n//KarlPollock91@gmail.com\r\n//www.karlpollock.com\r\n\r\n//ServerCreation.js holds the component for creating a new server.\r\n\r\nimport React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {Form} from 'react-bootstrap';\r\n\r\nimport * as Constants from '../../utils/constants';\r\n\r\nfunction ServerCreation(props) {\r\n\r\n    const [nameInput, setNameInput] = useState('');\r\n    const [errorText, setErrorText] = useState('');\r\n    const [formRef] = useState(React.createRef());\r\n    const navigate = useNavigate();\r\n\r\n    //Sends input forms to server to generate a user server.\r\n    const handleCreation = () => {\r\n        const fd = new FormData();\r\n\r\n        fd.append(\"serverName\", nameInput);\r\n        \r\n\r\n        if (formRef.current.files[0] && formRef.current.files[0].name) {\r\n            fd.append('file-upload', formRef.current.files[0], formRef.current.files[0].name);\r\n        }\r\n\r\n        if ((!formRef.current.files[0]) || (formRef.current.files[0].type.split('/')[0] === \"image\")) {\r\n            axios.post(`${Constants.SERVER_URL}/servers/create`, fd, {\r\n                headers: {\r\n                    'x-access-token': localStorage.getItem(\"authToken\"),\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            })\r\n            .then((res) => {\r\n                if (res.status === 200) {\r\n                    setErrorText(\"Server created\")\r\n                    finishServerCreation(res.data.serverId);\r\n                } \r\n            })\r\n            .catch((err) => {\r\n                setErrorText(\"Something went wrong.\")\r\n            });\r\n        } else {\r\n            setErrorText(\"Only image files can be set as the server thumbnail.\")\r\n        };\r\n    }\r\n\r\n    //Sends the user back a page.\r\n    const cancelServerCreation = () => {\r\n        navigate(-1);\r\n    }\r\n\r\n    //Sends the user to the Main.js component for server with id serverId\r\n    const finishServerCreation = (serverId) => {\r\n        props.refreshLeftSidebar();\r\n        navigate(`/s/${serverId}`);\r\n    }\r\n        return (\r\n            <div className=\"text-center position-relative w-100 h-100\">\r\n                <i className=\"bi bi-x-circle position-absolute top-0 end-0 fa-lg\" onClick={cancelServerCreation}></i>\r\n                <div className=\"mx-auto w-75 mt-5\">\r\n                    <div>{errorText}</div>\r\n                    Server Name\r\n                    <div className=\"input-group mb-3 \">\r\n                        <input type=\"text\" maxLength={20} value={nameInput} onInput={e => setNameInput(e.target.value)} className=\"form-control\" placeholder=\"Server Name\" aria-label=\"servername\" aria-describedby=\"basic-addon1\"/>\r\n                    </div>\r\n                    Server Thumbnail\r\n                    <Form action=\"/file\" method=\"post\" encType=\"multipart/form-data\">\r\n                        <Form.Group controlId=\"formFile\" className=\"mb-3\" a>\r\n                            <Form.Control type=\"file\" name=\"file-upload\" ref={formRef}/>\r\n                        </Form.Group>\r\n                    </Form>\r\n                    <button type=\"button\" onClick={handleCreation} className=\"btn btn-outline-primary\">Create</button>\r\n                </div>\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default ServerCreation;"]},"metadata":{},"sourceType":"module"}