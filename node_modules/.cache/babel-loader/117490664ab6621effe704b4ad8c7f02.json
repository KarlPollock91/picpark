{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KarlP\\\\new-app\\\\client\\\\src\\\\components\\\\secondary\\\\CommentSection.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport * as Constants from '../../utils/constants';\nimport CommentThumbnail from '../thumbnails/CommentThumbnail';\nimport '../css/Thumbnail.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CommentSection(props) {\n  _s();\n\n  const [comments, setComments] = useState([]);\n  const [updateComments, setUpdateComments] = useState(true);\n  const [newComment, setNewComment] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  useEffect(() => {\n    axios.get(`${Constants.SERVER_URL}/posts/getComments/${props.serverId}/${props.postId}`, {\n      headers: {\n        \"x-access-token\": localStorage.getItem(\"authToken\")\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setComments(res.data);\n      }\n    });\n  }, [updateComments, props.serverId, props.postId]);\n\n  const deleteComment = commentId => {\n    axios.delete(`${Constants.SERVER_URL}/posts/deleteComment/${props.serverId}/${commentId}`, {\n      headers: {\n        \"x-access-token\": localStorage.getItem(\"authToken\")\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setUpdateComments(!updateComments);\n      }\n    });\n  };\n\n  const makeComment = e => {\n    const fd = new FormData();\n    fd.append(\"commentText\", newComment);\n    axios.post(`${Constants.SERVER_URL}/posts/makeComment/${props.serverId}/${props.postId}`, fd, {\n      headers: {\n        \"x-access-token\": localStorage.getItem(\"authToken\"),\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setNewComment('');\n        setUpdateComments(!updateComments);\n      }\n    }).catch(err => {\n      setErrorMessage(\"You do not have permission to comment in this server.\");\n    });\n  }; //Enter pressed in the comment text field.\n\n\n  const submitComment = e => {\n    if (e.keyCode === 13 && e.shiftKey === false) {\n      e.preventDefault();\n      makeComment(e);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col border border-secondary content-comment mb-4 \",\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group w-100\",\n      children: [errorMessage, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-bottom border-secondary pb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          type: \"text\",\n          value: newComment,\n          onInput: e => setNewComment(e.target.value),\n          className: \"form-control mt-3\",\n          rows: \"2\",\n          placeholder: \"Comment\",\n          \"aria-label\": \"Comment\",\n          onKeyDown: submitComment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-outline-secondary\",\n          onClick: makeComment,\n          children: \"Post Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this), comments.map((el, i) => /*#__PURE__*/_jsxDEV(CommentThumbnail, {\n        deleteCommentCallback: deleteComment,\n        commentObject: el\n      }, el._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CommentSection, \"N4DZVzGx1NCDlEAbQO1nAhPyTz4=\");\n\n_c = CommentSection;\nexport default CommentSection;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentSection\");","map":{"version":3,"sources":["C:/Users/KarlP/new-app/client/src/components/secondary/CommentSection.js"],"names":["React","useEffect","useState","axios","Constants","CommentThumbnail","CommentSection","props","comments","setComments","updateComments","setUpdateComments","newComment","setNewComment","errorMessage","setErrorMessage","get","SERVER_URL","serverId","postId","headers","localStorage","getItem","then","res","status","data","deleteComment","commentId","delete","makeComment","e","fd","FormData","append","post","catch","err","submitComment","keyCode","shiftKey","preventDefault","target","value","map","el","i","_id"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport * as Constants from '../../utils/constants';\r\nimport CommentThumbnail from '../thumbnails/CommentThumbnail'\r\nimport '../css/Thumbnail.css';\r\n\r\nfunction CommentSection(props) {\r\n\r\n    const [comments, setComments] = useState([]);\r\n    const [updateComments, setUpdateComments] = useState(true);\r\n    const [newComment, setNewComment] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        axios.get(`${Constants.SERVER_URL}/posts/getComments/${props.serverId}/${props.postId}`, {headers: \r\n                {\r\n                    \"x-access-token\": localStorage.getItem(\"authToken\")\r\n                }\r\n            })\r\n            .then((res) => {\r\n                if (res.status === 200){\r\n                    setComments(res.data);  \r\n                }\r\n            });\r\n    }, [updateComments, props.serverId, props.postId]);\r\n\r\n    \r\n    const deleteComment = (commentId) => {\r\n        axios.delete(`${Constants.SERVER_URL}/posts/deleteComment/${props.serverId}/${commentId}`, {headers: \r\n        {\r\n            \"x-access-token\": localStorage.getItem(\"authToken\")\r\n        }})\r\n        .then((res) => {\r\n            if (res.status === 200){\r\n                setUpdateComments(!updateComments);\r\n            }\r\n        });\r\n    }\r\n\r\n    const makeComment = (e) => {\r\n        const fd = new FormData();\r\n        fd.append(\"commentText\", newComment);\r\n\r\n        axios.post(`${Constants.SERVER_URL}/posts/makeComment/${props.serverId}/${props.postId}`, fd,\r\n            {\r\n                headers: \r\n                    {\r\n                        \"x-access-token\": localStorage.getItem(\"authToken\"),\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n            })\r\n        .then((res) => {\r\n            if (res.status === 200){\r\n                setNewComment('');\r\n                setUpdateComments(!updateComments);\r\n            }\r\n        }).catch((err) => {\r\n            setErrorMessage(\"You do not have permission to comment in this server.\");\r\n        });\r\n    }\r\n\r\n     //Enter pressed in the comment text field.\r\n     const submitComment = (e) => {\r\n        if(e.keyCode === 13 && e.shiftKey === false) {\r\n          e.preventDefault();\r\n          makeComment(e);\r\n\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"col border border-secondary content-comment mb-4 \">\r\n            <ul className=\"list-group w-100\">\r\n                    {errorMessage}\r\n                    <div className=\"border-bottom border-secondary pb-2\">\r\n                    <textarea type=\"text\" value={newComment} onInput={e => setNewComment(e.target.value)} className=\"form-control mt-3\" rows=\"2\" placeholder=\"Comment\" aria-label=\"Comment\" onKeyDown={submitComment}/>\r\n                    <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={makeComment}>Post Comment</button>\r\n                    </div>\r\n                    {comments.map((el, i) => (\r\n                        <CommentThumbnail   key={el._id}\r\n                                            deleteCommentCallback={deleteComment}\r\n                                            commentObject={el}/>\r\n                    ))}\r\n            </ul>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default CommentSection;"]},"metadata":{},"sourceType":"module"}