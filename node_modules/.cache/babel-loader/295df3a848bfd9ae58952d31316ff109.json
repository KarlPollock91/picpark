{"ast":null,"code":"import _slicedToArray from\"C:/Users/KarlP/new-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//Written by Karl Pollock, 2022.\n//KarlPollock91@gmail.com\n//www.karlpollock.com\n//UserThumbnail.js is a component that displays a username, avatar and provides options to visit the View Profile or Main\n//components for the user.\nimport React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{Dropdown,DropdownButton}from'react-bootstrap';import Avatar from'../thumbnails/Avatar';import Loading from'../secondary/Loading';import'../css/Thumbnail.css';import*as Constants from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserThumbnail(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),serverPermission=_useState6[0],setServerPermission=_useState6[1];var navigate=useNavigate();//Component hook to retrieve the user profile.\nuseEffect(function(){if(props.userId!=null){axios.get(\"\".concat(Constants.SERVER_URL,\"/accounts/getUser/\").concat(props.userId),{headers:{\"x-access-token\":localStorage.getItem(\"authToken\")}}).then(function(res){if(res.status===200){setProfile(res.data.profileObject);setUserId(res.data.userId);}}).catch(function(err){//do nothing\n});;}},[props.serverId,props.userThumbnail,props.userId]);//Component hook to retrieve the permissions the user has in relation to a specific server.\nuseEffect(function(){if(props.serverId&&props.userId!=null){axios.get(\"\".concat(Constants.SERVER_URL,\"/servers/userPermissions/\").concat(props.serverId,\"/\").concat(props.userId),{headers:{\"x-access-token\":localStorage.getItem(\"authToken\")}}).then(function(res){if(res.status===200){setServerPermission(res.data.permissions);}});}},[props.serverId,props.userId]);//Handles the drop down menu for the post.\nvar handleSelect=function handleSelect(e){if(e===\"view\"){navigate(\"/profile/\".concat(profile._id));}else if(e===\"status\"){props.changeRankCallback(profile._id,profile.username,serverPermission);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container thumbnail-wrapper w-90\",children:profile?/*#__PURE__*/_jsxs(\"div\",{className:\"row h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 my-auto\",children:/*#__PURE__*/_jsx(Avatar,{avatarPostId:profile.avatarPostId})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 my-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:profile.username}),serverPermission?/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:Constants.USER_STATUS[serverPermission]}):\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsxs(DropdownButton,{className:\"m-2\",title:\"\",id:\"dropdown-basic-button\",variant:\"secondary\",size:\"sm\",onSelect:handleSelect,children:[/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"view\",children:\"View Profile\"}),props.serverId&&props.userPermission>=4&&props.userPermission>=serverPermission&&userId!==profile._id?/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"status\",children:\"Change User Rank\"}):\"\"]})})]}):/*#__PURE__*/_jsx(Loading,{})});}export default UserThumbnail;","map":{"version":3,"sources":["C:/Users/KarlP/new-app/client/src/components/thumbnails/UserThumbnail.js"],"names":["React","useEffect","useState","useNavigate","axios","Dropdown","DropdownButton","Avatar","Loading","Constants","UserThumbnail","props","profile","setProfile","userId","setUserId","serverPermission","setServerPermission","navigate","get","SERVER_URL","headers","localStorage","getItem","then","res","status","data","profileObject","catch","err","serverId","userThumbnail","permissions","handleSelect","e","_id","changeRankCallback","username","avatarPostId","USER_STATUS","userPermission"],"mappings":"gHAAA;AACA;AACA;AAEA;AACA;AAEA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,CAAkBC,cAAlB,KAAuC,iBAAvC,CAEA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,MAAO,sBAAP,CAEA,MAAO,GAAKC,CAAAA,SAAZ,KAA2B,uBAA3B,C,wFAEA,QAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CAE1B,cAA8BT,QAAQ,CAAC,IAAD,CAAtC,wCAAOU,OAAP,eAAgBC,UAAhB,eACA,eAA4BX,QAAQ,CAAC,IAAD,CAApC,yCAAOY,MAAP,eAAeC,SAAf,eACA,eAAgDb,QAAQ,CAAC,IAAD,CAAxD,yCAAOc,gBAAP,eAAyBC,mBAAzB,eACA,GAAMC,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAGD;AACCF,SAAS,CAAC,UAAM,CACZ,GAAIU,KAAK,CAACG,MAAN,EAAgB,IAApB,CAA0B,CACtBV,KAAK,CAACe,GAAN,WAAaV,SAAS,CAACW,UAAvB,8BAAsDT,KAAK,CAACG,MAA5D,EAAsE,CAACO,OAAO,CAC1E,CACA,iBAAkBC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADlB,CADkE,CAAtE,EAKCC,IALD,CAKM,SAACC,GAAD,CAAS,CACX,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAuB,CACnBb,UAAU,CAACY,GAAG,CAACE,IAAJ,CAASC,aAAV,CAAV,CACAb,SAAS,CAACU,GAAG,CAACE,IAAJ,CAASb,MAAV,CAAT,CACH,CACJ,CAVD,EAUGe,KAVH,CAUS,SAACC,GAAD,CAAS,CACd;AACH,CAZD,EAYG,CACN,CACJ,CAhBQ,CAgBN,CAACnB,KAAK,CAACoB,QAAP,CAAiBpB,KAAK,CAACqB,aAAvB,CAAsCrB,KAAK,CAACG,MAA5C,CAhBM,CAAT,CAkBA;AACAb,SAAS,CAAC,UAAM,CACZ,GAAIU,KAAK,CAACoB,QAAN,EAAkBpB,KAAK,CAACG,MAAN,EAAgB,IAAtC,CAA4C,CACxCV,KAAK,CAACe,GAAN,WAAaV,SAAS,CAACW,UAAvB,qCAA6DT,KAAK,CAACoB,QAAnE,aAA+EpB,KAAK,CAACG,MAArF,EAA+F,CAACO,OAAO,CACnG,CACA,iBAAkBC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADlB,CAD2F,CAA/F,EAKCC,IALD,CAKM,SAACC,GAAD,CAAS,CACX,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAuB,CACnBT,mBAAmB,CAACQ,GAAG,CAACE,IAAJ,CAASM,WAAV,CAAnB,CACH,CACJ,CATD,EAUH,CACJ,CAbQ,CAaN,CAACtB,KAAK,CAACoB,QAAP,CAAiBpB,KAAK,CAACG,MAAvB,CAbM,CAAT,CAeA;AACA,GAAMoB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxB,GAAIA,CAAC,GAAK,MAAV,CAAiB,CACbjB,QAAQ,oBAAaN,OAAO,CAACwB,GAArB,EAAR,CACH,CAFD,IAEO,IAAID,CAAC,GAAK,QAAV,CAAoB,CACvBxB,KAAK,CAAC0B,kBAAN,CAAyBzB,OAAO,CAACwB,GAAjC,CAAsCxB,OAAO,CAAC0B,QAA9C,CAAwDtB,gBAAxD,EACH,CACJ,CAND,CAQA,mBACI,YAAK,SAAS,CAAC,kCAAf,UACIJ,OAAO,cACH,aAAK,SAAS,CAAC,WAAf,wBACI,YAAK,SAAS,CAAC,kBAAf,uBACI,KAAC,MAAD,EAAQ,YAAY,CAAEA,OAAO,CAAC2B,YAA9B,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,kBAAf,wBACI,YAAK,SAAS,CAAC,KAAf,UACK3B,OAAO,CAAC0B,QADb,EADJ,CAIKtB,gBAAgB,cACb,YAAK,SAAS,CAAC,KAAf,UACKP,SAAS,CAAC+B,WAAV,CAAsBxB,gBAAtB,CADL,EADa,CAIf,EARN,GAJJ,cAcI,YAAK,SAAS,CAAC,UAAf,uBACI,MAAC,cAAD,EAAgB,SAAS,CAAC,KAA1B,CAAgC,KAAK,CAAC,EAAtC,CAAyC,EAAE,CAAC,uBAA5C,CAAoE,OAAO,CAAC,WAA5E,CAAwF,IAAI,CAAC,IAA7F,CAAkG,QAAQ,CAAEkB,YAA5G,wBACI,KAAC,QAAD,CAAU,IAAV,EAAe,QAAQ,CAAC,MAAxB,0BADJ,CAEMvB,KAAK,CAACoB,QAAP,EAAqBpB,KAAK,CAAC8B,cAAN,EAAwB,CAA7C,EAAoD9B,KAAK,CAAC8B,cAAN,EAAwBzB,gBAA5E,EAAkGF,MAAM,GAAKF,OAAO,CAACwB,GAArH,cACG,KAAC,QAAD,CAAU,IAAV,EAAe,QAAQ,CAAC,QAAxB,8BADH,CAEK,EAJV,GADJ,EAdJ,GADG,cAyBL,KAAC,OAAD,IA1BN,EADJ,CA+BH,CAED,cAAe1B,CAAAA,aAAf","sourcesContent":["//Written by Karl Pollock, 2022.\r\n//KarlPollock91@gmail.com\r\n//www.karlpollock.com\r\n\r\n//UserThumbnail.js is a component that displays a username, avatar and provides options to visit the View Profile or Main\r\n//components for the user.\r\n\r\nimport React, {useEffect, useState} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport {Dropdown, DropdownButton} from 'react-bootstrap';\r\n\r\nimport Avatar from '../thumbnails/Avatar';\r\nimport Loading from '../secondary/Loading';\r\nimport '../css/Thumbnail.css';\r\n\r\nimport * as Constants from '../../utils/constants';\r\n\r\nfunction UserThumbnail(props) {\r\n\r\n    const [profile, setProfile] = useState(null);\r\n    const [userId, setUserId] = useState(null);\r\n    const [serverPermission, setServerPermission] = useState(null);\r\n    const navigate = useNavigate();\r\n    \r\n\r\n   //Component hook to retrieve the user profile.\r\n    useEffect(() => {\r\n        if (props.userId != null) {\r\n            axios.get(`${Constants.SERVER_URL}/accounts/getUser/${props.userId}`, {headers: \r\n                {\r\n                \"x-access-token\": localStorage.getItem(\"authToken\")\r\n                }\r\n            })\r\n            .then((res) => {\r\n                if (res.status === 200){\r\n                    setProfile(res.data.profileObject);\r\n                    setUserId(res.data.userId);\r\n                }\r\n            }).catch((err) => {\r\n                //do nothing\r\n            });;\r\n        }\r\n    }, [props.serverId, props.userThumbnail, props.userId]);\r\n\r\n    //Component hook to retrieve the permissions the user has in relation to a specific server.\r\n    useEffect(() => {\r\n        if (props.serverId && props.userId != null) {\r\n            axios.get(`${Constants.SERVER_URL}/servers/userPermissions/${props.serverId}/${props.userId}`, {headers: \r\n                {\r\n                \"x-access-token\": localStorage.getItem(\"authToken\")\r\n                }\r\n            })\r\n            .then((res) => {\r\n                if (res.status === 200){\r\n                    setServerPermission(res.data.permissions);\r\n                }\r\n            });\r\n        }\r\n    }, [props.serverId, props.userId]);\r\n\r\n    //Handles the drop down menu for the post.\r\n    const handleSelect = (e) => {\r\n        if (e === \"view\"){\r\n            navigate(`/profile/${profile._id}`);\r\n        } else if (e === \"status\") {\r\n            props.changeRankCallback(profile._id, profile.username, serverPermission);\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"container thumbnail-wrapper w-90\">\r\n           {profile ?\r\n                <div className=\"row h-100\">\r\n                    <div className=\"col-md-4 my-auto\">\r\n                        <Avatar avatarPostId={profile.avatarPostId}/>\r\n                    </div>\r\n                    <div className=\"col-md-6 my-auto\">\r\n                        <div className=\"row\">\r\n                            {profile.username}\r\n                        </div>\r\n                        {serverPermission ? \r\n                            <div className=\"row\">\r\n                                {Constants.USER_STATUS[serverPermission]}\r\n                            </div>\r\n                        : \"\"}\r\n                    </div>\r\n                    <div className=\"col-md-2\">\r\n                        <DropdownButton className=\"m-2\" title=\"\" id=\"dropdown-basic-button\" variant=\"secondary\" size=\"sm\" onSelect={handleSelect}>\r\n                            <Dropdown.Item eventKey=\"view\">View Profile</Dropdown.Item>\r\n                            {(props.serverId) && (props.userPermission >= 4) && (props.userPermission >= serverPermission) && (userId !== profile._id) ?\r\n                                <Dropdown.Item eventKey=\"status\">Change User Rank</Dropdown.Item> \r\n                                : \"\"\r\n                            }\r\n                        </DropdownButton>\r\n                    </div>\r\n                </div>\r\n            : <Loading/>}\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default UserThumbnail;"]},"metadata":{},"sourceType":"module"}